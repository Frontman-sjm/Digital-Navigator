<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>그림의 디지털 표현</title>
  <link rel="stylesheet" href="../assets/css/styles.css" />
</head>
<body>
  <header>
    <h1>그림의 디지털 표현</h1>
    <nav>
      <ul>
        <li><a href="../index.html">홈</a></li>
        <li><a href="binary.html">이진수란?</a></li>
        <li><a href="bit.html">비트란?</a></li>
        <li><a href="text.html">문자의 디지털 표현</a></li>
        <li><a href="image.html">그림의 디지털 표현</a></li>
        <li><a href="sound.html">소리의 디지털 표현</a></li>
        <li><a href="video.html">동영상의 디지털 표현</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="pixel-challenge-section">
      <h2>픽셀 복원 챌린지</h2>
      <p class="challenge-description">이름 또는 이미지를 픽셀화하고 해상도에 따른 정보 손실을 체험해 보세요.</p>

      <div class="pixel-restoration-challenge">
        <div class="challenge-controls">
          <div class="control-panel">
            <div class="input-group">
              <label for="nameInput">📝 내용을 입력하세요:</label>
              <div class="input-wrapper">
                <input type="text" id="nameInput" placeholder="예: 홍길동 or Alice">
                <button class="primary-button" onclick="renderName()">이름 이미지 생성</button>
              </div>
            </div>

            <div class="input-group">
              <label for="imgUpload">🖼 이미지 업로드:</label>
              <div class="input-wrapper">
                <input type="file" id="imgUpload" accept="image/*" class="file-input">
                <div class="file-input-label">파일 선택</div>
              </div>
            </div>

            <div class="input-group">
              <label for="resolution">해상도 선택:</label>
              <div class="input-wrapper">
                <select id="resolution" class="resolution-select">
                  <option value="8">8 x 6</option>
                  <option value="16">16 x 12</option>
                  <option value="32">32 x 24</option>
                  <option value="64">64 x 48</option>
                  <option value="128">128 x 96</option>
                  <option value="256">256 x 192</option>
                  <option value="400">400 x 300</option>
                  <option value="800" selected>800 x 600</option>
                </select>
                <div class="button-group">
                  <button class="primary-button" onclick="applyResolution()">해상도 적용</button>
                  <button class="secondary-button" onclick="downloadImage()">이미지 저장</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="challenge-area">
          <div class="canvas-container">
            <canvas id="pixelCanvas" width="800" height="600"></canvas>
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2>RGB 색상 모델</h2>
      <p>여러 색상 팔레트에서 색을 선택하고 픽셀을 클릭하여 그림을 그려보세요!</p>

      <!-- 1. 색상 팔레트 설정 -->
      <div class="color-picker">
        <h4>1️⃣ 색상 팔레트 구성</h4>
        <div class="color-controls">
          <div class="input-group">
            <label for="bitCount">비트 수를 선택하세요:</label>
            <select id="bitCount">
              <option value="1">1비트 (2색)</option>
              <option value="2">2비트 (4색)</option>
              <option value="3">3비트 (8색)</option>
              <option value="4">4비트 (16색)</option>
            </select>
          </div>
          <div class="input-group">
            <label for="numColors">몇 개의 색을 사용할까요?</label>
            <div class="input-wrapper">
              <input type="number" id="numColors" min="1" max="2" placeholder="비트 수에 따라 자동 제한" />
              <button onclick="generatePalette()">팔레트 만들기</button>
            </div>
            <div class="input-guide"><strong>※ 안내</strong> 비트 수에 따라 선택 가능한 색상 개수가 자동으로 제한됩니다.</div>
          </div>
        </div>
        <div id="paletteArea" class="color-options"></div>
      </div>

      <!-- 2 & 3. 캔버스 + 미리보기 나란히 배치 -->
      <div class="section">
        <h2>2️⃣ 캔버스 설정</h2>
        <div class="canvas-controls">
          <label for="canvasRows">행 수:</label>
          <input type="number" id="canvasRows" min="1" max="20" value="10">
          <label for="canvasCols">열 수:</label>
          <input type="number" id="canvasCols" min="1" max="20" value="10">
          <button onclick="generateCanvas()">캔버스 생성</button>
        </div>
        <div class="canvas-section">
          <div class="canvas-grid-wrapper">
            <div>
              <h3>캔버스</h3>
              <div id="canvasGrid" class="canvas-grid"></div>
            </div>
            <div>
              <h3>미리보기</h3>
              <div id="previewGrid" class="preview-grid"></div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script src="../assets/js/image.js"></script>
  <script src="../assets/js/pixel-challenge.js"></script>
</body>
</html>
