<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì´ì§„ìˆ˜ë€?</title>
  <link rel="stylesheet" href="../assets/css/styles.css" />
  <style>
    .input-guide {
      background-color: #f8f9fa;
      border-left: 4px solid #007bff;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 4px;
    }

    .binary-representation {
      font-size: 1.5rem;
      font-weight: bold;
      text-align: center;
      margin: 1rem 0;
      padding: 1rem;
      background-color: #e9ecef;
      border-radius: 4px;
    }

    .step {
      margin: 0.5rem 0;
      padding: 0.5rem;
      background-color: #f8f9fa;
      border-radius: 4px;
    }

    .step-input {
      width: 80px;
      padding: 0.25rem;
      margin-left: 0.5rem;
      border: 1px solid #ced4da;
      border-radius: 4px;
    }

    .step-input.correct {
      background-color: #d4edda;
      border-color: #c3e6cb;
    }

    .step-input.incorrect {
      background-color: #f8d7da;
      border-color: #f5c6cb;
    }

    .result {
      margin: 1rem 0;
      padding: 1rem;
      border-radius: 4px;
      text-align: center;
      font-weight: bold;
    }

    .converter-box {
      background-color: #f8f9fa;
      padding: 1.5rem;
      border-radius: 8px;
      margin: 1rem 0;
    }

    .input-group {
      margin-bottom: 1rem;
    }

    .input-wrapper {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }

    .bit-box {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin: 1rem 0;
    }

    .bit {
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #e9ecef;
      border: 2px solid #ced4da;
      border-radius: 4px;
      cursor: pointer;
      text-align: center;
      font-size: 0.9rem;
      transition: all 0.2s;
    }

    .bit:hover {
      background-color: #dee2e6;
    }

    .bit.active {
      background-color: #007bff;
      color: white;
      border-color: #0056b3;
    }

    .bit.incorrect {
      background-color: #dc3545;
      color: white;
      border-color: #bd2130;
    }

    .button-group {
      display: flex;
      gap: 0.5rem;
      margin: 1rem 0;
    }

    .primary-button {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .primary-button:hover {
      background-color: #0056b3;
    }

    .secondary-button {
      background-color: #6c757d;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .secondary-button:hover {
      background-color: #545b62;
    }
  </style>
</head>
<body>
  <header>
    <h1>ì´ì§„ìˆ˜ë€?</h1>
    <nav>
      <ul>
        <li><a href="../index.html">í™ˆ</a></li>
        <li><a href="binary.html">ì´ì§„ìˆ˜ë€?</a></li>
        <li><a href="bit.html">ë¹„íŠ¸ë€?</a></li>
        <li><a href="text.html">ë¬¸ìì˜ ë””ì§€í„¸ í‘œí˜„</a></li>
        <li><a href="image.html">ê·¸ë¦¼ì˜ ë””ì§€í„¸ í‘œí˜„</a></li>
        <li><a href="sound.html">ì†Œë¦¬ì˜ ë””ì§€í„¸ í‘œí˜„</a></li>
        <li><a href="video.html">ë™ì˜ìƒì˜ ë””ì§€í„¸ í‘œí˜„</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section>
      <h2>ì´ì§„ìˆ˜ ì²´ê³„</h2>
      <p>
        ì´ì§„ìˆ˜ëŠ” 0ê³¼ 1 ë‘ ê°œì˜ ìˆ«ìë§Œì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ìˆ˜ë¥¼ í‘œí˜„í•˜ëŠ” ìˆ˜ ì²´ê³„ì…ë‹ˆë‹¤.<br>
        ìš°ë¦¬ê°€ ì¼ìƒì—ì„œ ì‚¬ìš©í•˜ëŠ” ì‹­ì§„ìˆ˜ëŠ” 0ë¶€í„° 9ê¹Œì§€ì˜ 10ê°œì˜ ìˆ«ìë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ,<br>
        ì´ì§„ìˆ˜ëŠ” 0ê³¼ 1ë§Œì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ìˆ˜ë¥¼ í‘œí˜„í•©ë‹ˆë‹¤.<br><br>
        
        ì´ì§„ìˆ˜ì˜ ê° ìë¦¬ëŠ” 2ì˜ ê±°ë“­ì œê³±ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.<br>
        ì˜¤ë¥¸ìª½ì—ì„œ ì™¼ìª½ìœ¼ë¡œ ê°ˆìˆ˜ë¡ 2ì˜ ê±°ë“­ì œê³±ì´ ì»¤ì§‘ë‹ˆë‹¤.<br>
        ì˜ˆë¥¼ ë“¤ì–´, ì´ì§„ìˆ˜ 1011ì€ ë‹¤ìŒê³¼ ê°™ì´ ê³„ì‚°ë©ë‹ˆë‹¤:<br>
        1Ã—2Â³ + 0Ã—2Â² + 1Ã—2Â¹ + 1Ã—2â° = 8 + 0 + 2 + 1 = 11(ì‹­ì§„ìˆ˜)<br>
      </p>
    </section>

    <section>
      <div class="binary-converter">
        <div class="converter-box">
          <h3>ì´ì§„ìˆ˜ ë³€í™˜ê¸°</h3>
          <p>ì´ì§„ìˆ˜ëŠ” ì»´í“¨í„°ê°€ ì •ë³´ë¥¼ í‘œí˜„í•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ë°©ì‹ì…ë‹ˆë‹¤. 0ê³¼ 1ë§Œì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ìˆ«ìë¥¼ í‘œí˜„í•  ìˆ˜ ìˆìœ¼ë©°, ê° ìë¦¬ì˜ ìœ„ì¹˜ì— ë”°ë¼ ê°’ì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤.</p>
          <p>10ì§„ìˆ˜ë¥¼ 2ì§„ìˆ˜ë¡œ ë³€í™˜í•´ë³´ì„¸ìš”. 0ë¶€í„° 255ê¹Œì§€ì˜ ìˆ«ìë¥¼ ì…ë ¥í•˜ë©´ 8ë¹„íŠ¸ ì´ì§„ìˆ˜ë¡œ ë³€í™˜ë©ë‹ˆë‹¤.</p>
          <div class="input-guide">
            <strong>ì‚¬ìš© ë°©ë²•</strong><br>
            <ul>
              <li>0ë¶€í„° 255 ì‚¬ì´ì˜ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”</li>
              <li>ë³€í™˜í•˜ê¸° ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ 8ë¹„íŠ¸ ì´ì§„ìˆ˜ë¡œ ë³€í™˜ë©ë‹ˆë‹¤</li>
              <li>ê° ìë¦¬ì˜ ìœ„ì¹˜ì™€ ê°’ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
            </ul>
          </div>
          <div class="input-group">
            <label for="decimalInput">10ì§„ìˆ˜ ì…ë ¥ (0-255):</label>
            <div class="input-wrapper">
              <input type="number" id="decimalInput" min="0" max="255" placeholder="0-255 ì‚¬ì´ì˜ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”">
              <button onclick="convertToBinary()">ë³€í™˜í•˜ê¸°</button>
            </div>
          </div>
          <div class="result" id="binaryResult">ì´ì§„ìˆ˜ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div>
        </div>
      </div>
    </section>

    <section>
      <h2>ì´ì§„ìˆ˜ í€´ì¦ˆ</h2>
      <p>ì´ì§„ìˆ˜ë¥¼ ì‹­ì§„ìˆ˜ë¡œ ë³€í™˜í•˜ëŠ” í€´ì¦ˆë¥¼ í’€ì–´ë³´ì„¸ìš”!</p>
      <div class="quiz-section">
        <div class="difficulty-selector">
          <h3>ë‚œì´ë„ ì„ íƒ</h3>
          <div class="difficulty-buttons">
            <button class="difficulty-btn" data-bits="3">3ìë¦¬ (ì´ˆê¸‰)</button>
            <button class="difficulty-btn" data-bits="4">4ìë¦¬ (ì¤‘ê¸‰)</button>
            <button class="difficulty-btn" data-bits="5">5ìë¦¬ (ì¤‘ìƒê¸‰)</button>
            <button class="difficulty-btn" data-bits="6">6ìë¦¬ (ìƒê¸‰)</button>
            <button class="difficulty-btn" data-bits="7">7ìë¦¬ (ìµœìƒê¸‰)</button>
          </div>
        </div>
        <button class="quiz-start-btn" onclick="startQuiz()">í€´ì¦ˆ í’€ê¸°</button>
      </div>
    </section>

    <!-- í€´ì¦ˆ ëª¨ë‹¬ -->
    <div id="quizModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>ì´ì§„ìˆ˜ í€´ì¦ˆ</h3>
          <span class="close-btn" onclick="closeQuizModal()">&times;</span>
        </div>
        <div class="modal-body">
          <div class="quiz-info">
            <span id="currentDifficulty">í˜„ì¬ ë‚œì´ë„: 3ìë¦¬</span>
            <span id="quizScore">ì ìˆ˜: 0</span>
          </div>
          <div id="quizQuestion" class="quiz-question"></div>
          <div class="quiz-input">
            <input type="number" id="quizAnswer" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" />
            <button onclick="checkAnswer()">ì •ë‹µ í™•ì¸</button>
          </div>
          <div id="quizResult" class="quiz-result"></div>
        </div>
      </div>
    </div>

    <section>
      <h2>ì´ì§„ìˆ˜ ë³€í™˜ ê²Œì„</h2>
      <p>ì´ì§„ìˆ˜ë¥¼ ì‹­ì§„ìˆ˜ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì„ ë‹¨ê³„ë³„ë¡œ í•™ìŠµí•´ë³´ì„¸ìš”!</p>
      
      <div id="weightExplanation" class="input-guide">
        <strong>2ì§„ìˆ˜ì˜ ê°€ì¤‘ì¹˜ë€?</strong><br>
        2ì§„ìˆ˜ì˜ ê° ìë¦¬ì—ëŠ” <strong>2ì˜ ê±°ë“­ì œê³±</strong>ì´ ê°€ì¤‘ì¹˜ë¡œ ì ìš©ë©ë‹ˆë‹¤.<br>
        ì˜ˆë¥¼ ë“¤ì–´, <strong>1011</strong>ì€ ë‹¤ìŒì²˜ëŸ¼ ê³„ì‚°í•©ë‹ˆë‹¤:<br>
        <code>1Ã—2Â³ + 0Ã—2Â² + 1Ã—2Â¹ + 1Ã—2â° = 8 + 0 + 2 + 1 = 11</code><br>
        ê° ìë¦¬ì˜ ê°€ì¤‘ì¹˜ë¥¼ ì˜ ì‚´í´ë³´ì„¸ìš”!
      </div>

      <div id="binaryDisplay" class="binary-representation"></div>
      <div id="stepsContainer"></div>
      
      <div class="button-group">
        <button class="primary-button" onclick="checkAnswers()">ì œì¶œ</button>
        <button class="secondary-button" onclick="createGame()">ìƒˆ ê²Œì„</button>
      </div>

      <div id="finalResult" class="result"></div>

      <div class="converter-box">
        <h3>ğŸ“ ì§ì ‘ 2ì§„ìˆ˜ ì…ë ¥ â†’ 10ì§„ìˆ˜ ë³€í™˜</h3>
        <div class="input-group">
          <label for="customBinaryInput">2ì§„ìˆ˜ ì…ë ¥:</label>
          <div class="input-wrapper">
            <input type="text" id="customBinaryInput" placeholder="ì˜ˆ: 1011">
            <button class="primary-button" onclick="convertCustomBinary()">ë³€í™˜</button>
          </div>
        </div>
        <div id="customBinaryResult" class="result"></div>
      </div>
    </section>

    <section>
      <h2>ìë¦¬ê°’ìœ¼ë¡œ 2ì§„ìˆ˜ ë§Œë“¤ê¸°</h2>
      <p>2ì§„ìˆ˜ë¡œ ë³€í™˜í•˜ê³  ì‹¶ì€ 10ì§„ìˆ˜ë¥¼ ì…ë ¥í•˜ê³ , ìë¦¬ê°’ì„ í´ë¦­í•˜ì—¬ 2ì§„ìˆ˜ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”!</p>
      
      <div class="converter-box">
        <div class="input-group">
          <label for="placeValueInput">10ì§„ìˆ˜ ì…ë ¥ (1-1023):</label>
          <div class="input-wrapper">
            <input type="number" id="placeValueInput" placeholder="ì˜ˆ: 25" min="1" max="1023">
            <button class="primary-button" onclick="createPlaceValueBits()">ìë¦¬ê°’ ìƒì„±</button>
          </div>
        </div>

        <div id="placeValueBitBox" class="bit-box"></div>
        <div id="placeValueSumDisplay" class="result"></div>
        <div class="button-group">
          <button class="primary-button" onclick="checkPlaceValueAnswer()">ì œì¶œ</button>
          <button class="secondary-button" onclick="resetPlaceValueGame()">ì´ˆê¸°í™”</button>
        </div>
        <div id="placeValueFeedback" class="result"></div>
      </div>
    </section>
  </main>

  <script src="../assets/js/binary.js"></script>
  <script>
    // ì´ì§„ìˆ˜ ë³€í™˜ ê²Œì„
    let binaryStr = "";
    let steps = [];

    function createGame() {
      steps = [];
      document.getElementById("finalResult").innerText = "";
      
      const length = Math.floor(Math.random() * 4) + 3;
      binaryStr = "";
      for (let i = 0; i < length; i++) {
        binaryStr += Math.random() < 0.5 ? "0" : "1";
      }
      if (binaryStr[0] === "0") binaryStr = "1" + binaryStr.slice(1);
      
      document.getElementById("binaryDisplay").innerText = `2ì§„ìˆ˜ ê°’: ${binaryStr}`;
      
      const container = document.getElementById("stepsContainer");
      container.innerHTML = "";
      const n = binaryStr.length;
      for (let i = 0; i < n; i++) {
        const exponent = n - 1 - i;
        const bit = binaryStr[i];
        const expected = parseInt(bit) * Math.pow(2, exponent);

        const stepDiv = document.createElement("div");
        stepDiv.className = "step";

        const label = document.createElement("span");
        label.innerHTML = `2<sup>${exponent}</sup> Ã— ${bit} = `;

        const input = document.createElement("input");
        input.type = "number";
        input.className = "step-input";
        input.placeholder = "?";

        steps.push({ exponent, bit, expected, inputElement: input });
        stepDiv.appendChild(label);
        stepDiv.appendChild(input);
        container.appendChild(stepDiv);
      }
    }

    function checkAnswers() {
      let isAllCorrect = true;
      let total = 0;
      
      steps.forEach(step => {
        const userAnswer = parseInt(step.inputElement.value);
        step.inputElement.classList.remove("correct", "incorrect");

        if (userAnswer === step.expected) {
          step.inputElement.classList.add("correct");
        } else {
          step.inputElement.classList.add("incorrect");
          isAllCorrect = false;
        }
        total += step.expected;
      });

      const resultDiv = document.getElementById("finalResult");
      resultDiv.innerText = isAllCorrect 
        ? `âœ… ëª¨ë“  ë‹¨ê³„ ì •ë‹µ! ìµœì¢… 10ì§„ìˆ˜ ê°’ì€ ${total}ì…ë‹ˆë‹¤.` 
        : `âŒ ì¼ë¶€ ë‹¨ê³„ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤. ìµœì¢… 10ì§„ìˆ˜ ê°’ì€ ${total}ì…ë‹ˆë‹¤.`;
    }

    function convertCustomBinary() {
      const input = document.getElementById("customBinaryInput").value.trim();
      const resultDiv = document.getElementById("customBinaryResult");

      if (!/^[01]+$/.test(input)) {
        resultDiv.innerText = "âš ï¸ ì˜¬ë°”ë¥¸ 2ì§„ìˆ˜(0ê³¼ 1ë§Œ)ë¥¼ ì…ë ¥í•˜ì„¸ìš”.";
        return;
      }

      const decimalValue = parseInt(input, 2);
      resultDiv.innerText = `ğŸ”„ 2ì§„ìˆ˜ ${input} = 10ì§„ìˆ˜ ${decimalValue}`;
    }

    // ìë¦¬ê°’ ê²Œì„
    let placeValueDecimal = 0;
    let placeValueBits = [];

    function createPlaceValueBits() {
      const input = document.getElementById("placeValueInput").value;
      placeValueDecimal = parseInt(input);
      
      if (isNaN(placeValueDecimal) || placeValueDecimal < 1 || placeValueDecimal > 1023) {
        alert("1ë¶€í„° 1023 ì‚¬ì´ì˜ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
        return;
      }

      placeValueBits = [];
      const bitBox = document.getElementById("placeValueBitBox");
      bitBox.innerHTML = "";

      // í•„ìš”í•œ ë¹„íŠ¸ ìˆ˜ ê³„ì‚° (2ì˜ ê±°ë“­ì œê³±ìœ¼ë¡œ í‘œí˜„í•˜ê¸° ìœ„í•œ ìµœì†Œ ë¹„íŠ¸ ìˆ˜)
      const maxPower = Math.floor(Math.log2(placeValueDecimal));
      
      // ê° ìë¦¬ê°’ ìƒì„±
      for (let i = maxPower; i >= 0; i--) {
        const value = Math.pow(2, i);
        const div = document.createElement("div");
        div.className = "bit";
        div.innerText = `2^${i}\n(0)`;
        div.onclick = () => togglePlaceValueBit(div, i);
        bitBox.appendChild(div);
        placeValueBits.push({ element: div, active: false, value, power: i });
      }

      updatePlaceValueSum();
      document.getElementById("placeValueFeedback").innerText = "";
    }

    function togglePlaceValueBit(div, power) {
      const bit = placeValueBits.find(b => b.element === div);
      bit.active = !bit.active;
      div.classList.toggle("active", bit.active);
      div.classList.remove("incorrect");
      div.innerText = `2^${power}\n(${bit.active ? 1 : 0})`;
      updatePlaceValueSum();
      document.getElementById("placeValueFeedback").innerText = "";
    }

    function updatePlaceValueSum() {
      const sum = placeValueBits.reduce((acc, b) => acc + (b.active ? b.value : 0), 0);
      document.getElementById("placeValueSumDisplay").innerText = `í˜„ì¬ ê°’ì˜ í•©: ${sum}`;
    }

    function checkPlaceValueAnswer() {
      const correctBinary = placeValueDecimal.toString(2).padStart(placeValueBits.length, '0');
      let isCorrect = true;

      placeValueBits.forEach((bit, idx) => {
        const expected = correctBinary[idx] === '1';
        const user = bit.active;

        if (user !== expected) {
          bit.element.classList.add("incorrect");
          isCorrect = false;
        } else {
          bit.element.classList.remove("incorrect");
        }
      });

      const total = placeValueBits.reduce((acc, b) => acc + (b.active ? b.value : 0), 0);
      const feedback = document.getElementById("placeValueFeedback");
      
      if (isCorrect) {
        feedback.innerText = `âœ… ì •ë‹µì…ë‹ˆë‹¤!`;
        feedback.style.color = "#28a745";
      } else {
        feedback.innerText = `âŒ ì˜¤ë‹µì…ë‹ˆë‹¤. ëª©í‘œ: ${placeValueDecimal}, í˜„ì¬: ${total}`;
        feedback.style.color = "#dc3545";
      }
    }

    function resetPlaceValueGame() {
      placeValueDecimal = 0;
      placeValueBits = [];
      document.getElementById("placeValueInput").value = "";
      document.getElementById("placeValueBitBox").innerHTML = "";
      document.getElementById("placeValueSumDisplay").innerText = "";
      document.getElementById("placeValueFeedback").innerText = "";
    }

    // ì´ˆê¸° ê²Œì„ ìƒì„±
    createGame();
  </script>
</body>
</html>
